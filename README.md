# Vprok Parser

Тестовое задание содержит два Node.js-скрипта для парсинга сайта **www.vprok.ru** с использованием **Puppeteer**.
Все результаты сохраняются в папку `data/` (создаётся автоматически).

---

## Установка

```bash
npm install
```

### Часть 1 — Парсинг страницы товара

Пример запуска:

```bash
node puppeteer.js https://www.vprok.ru/product/domik-v-derevne-dom-v-der-moloko-ster-3-2-950g--309202 "Санкт-Петербург и область"
```

- выбирает регион,
- делает полноразмерный скриншот страницы товара,
- извлекает цену, старую цену (если есть), рейтинг и количество отзывов.

#### Результат:

```text
data/
├── screenshot.jpg
└── product.txt

```

#### Структура

```
price=89.9
priceOld=134
rating=4.8
reviewCount=780

```

### Часть 2 — Парсинг страницы категории (API)

- собирает товары с первой страницы категории,
- использует данные API сайта (**NEXT_DATA**),
- НЕ выбирает регион и не обрабатывает пагинацию.

```bash
node api-parser.js https://www.vprok.ru/catalog/7382/pomidory-i-ovoschnye-nabory
```

#### Структура записи товара

```text
Название товара
Ссылка на страницу товара
Рейтинг
Количество отзывов
Цена
Акционная цена
Цена до акции
Размер скидки
```

#### Note: Почему используется парсинг `__NEXT_DATA__`

> ---
>
> Сайт **vprok.ru** построен на **Next.js** и использует **SSR**. При анализе сетевых запросов (**Network → Fetch/XHR**) не обнаружено публичного API для получения списка товаров.
>
> Попытки получить HTML страницы напрямую через `axios` приводят к ответу `503` из-за JS-challenge и антибот-защиты.
>
> Все данные страницы встроены в HTML в JSON-виде внутри скрипта `__NEXT_DATA__`.
>
> ---

### Linter and formatter:

```bash
npm run lint
npm run format
```
